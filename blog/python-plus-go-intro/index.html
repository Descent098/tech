<!DOCTYPE html><html lang="en" data-theme="lofi"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/jpeg" href="/tech/profile.jpg"><meta name="generator" content="Astro v4.4.15"><!-- Primary Meta Tags --><title>Python + Go: Introduction | Kieran Wood</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta name="title" content="Python + Go: Introduction"><meta name="description" content="A match made in heaven, or hell?"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://kieranwood.ca/tech/blog/python-plus-go-intro/"><meta property="og:title" content="Python + Go: Introduction"><meta property="og:description" content="A match made in heaven, or hell?"><meta property="og:image" content="https://kieranwood.ca/tech/blog/python-plus-go/diagram.excalidraw.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://kieranwood.ca/tech/blog/python-plus-go-intro/"><meta property="twitter:title" content="Python + Go: Introduction"><meta property="twitter:description" content="A match made in heaven, or hell?"><meta property="twitter:image" content="https://kieranwood.ca/tech/blog/python-plus-go/diagram.excalidraw.png"><link rel="stylesheet" href="/tech/_astro/_page_.D_l8DYJv.css" />
<style>.time-line-container>div:last-child .education__time>.education__line{display:none}details{background:#f0f0f0;padding:1rem;border-radius:.7rem;margin:.5rem auto;width:100%}summary{cursor:pointer}#TOC-list{list-style:none}#TOC-list li{margin-top:.15rem}.danger-banner{display:flex;flex-direction:row;background:#f44336;border-radius:.25rem;padding:1.1rem;color:#fff!important;flex-wrap:wrap}.danger-banner strong,.danger-banner a{color:#fff!important}.danger-banner:before{content:"!üõë Danger üõë!";flex-basis:100%;margin-bottom:.5rem;padding:.6rem;border-radius:.25rem;text-align:center;background:red;text-transform:uppercase}.warning-banner{display:flex;flex-direction:row;background:#fcc51e;border-radius:.25rem;padding:1.1rem;color:#141414!important;flex-wrap:wrap}.warning-banner strong,.warning-banner a{color:#141414!important}.warning-banner:before{content:"üü° Warning üü°";flex-basis:100%;margin-bottom:.5rem;padding:.6rem;border-radius:.25rem;text-align:center;background:#f6cb49;text-transform:uppercase;text-shadow:1px 1px 1px rgb(93,93,93)}.level-3{text-indent:1rem}.level-4{text-indent:2rem}.level-5{text-indent:3rem}.level-6{text-indent:4rem}.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/tech/_astro/hoisted.CHePpst8.js"></script><style>[data-astro-transition-scope="astro-vz7ejtmd-1"] { view-transition-name: __2ftech_2fblog_2fpython-plus-go_2fdiagram_2eexcalidraw_2epng; }</style><style>[data-astro-transition-scope="astro-frvnq75b-2"] { view-transition-name: Python_20_2b_20Go_3a_20Introduction; }</style></head> <body> <div class="bg-base-100 drawer lg:drawer-open"> <input id="my-drawer" type="checkbox" class="drawer-toggle"> <div class="drawer-content bg-base-100"> <div class="sticky lg:hidden top-0 z-30 flex h-16 w-full justify-center bg-opacity-90 backdrop-blur transition-all duration-100 bg-base-100 text-base-content shadow-sm"> <div class="navbar"> <div class="navbar-start"> <label for="my-drawer" class="btn btn-square btn-ghost"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path> </svg> </label> </div> <div class="navbar-center"> <a class="btn btn-ghost normal-case text-xl" href="/">Kieran Wood ‚ö°Ô∏è</a> </div> <div class="navbar-end"></div> </div> </div> <div class="md:flex md:justify-center"> <main class="p-6 pt-10 lg:max-w-[900px] max-w-[100vw]">  <main class="md:flex md:justify-center"> <article class="prose prose-lg max-w-[750px] prose-img:mx-auto"> <img src="/tech/blog/python-plus-go/diagram.excalidraw.png" alt="Python + Go: Introduction" class="w-full mb-6" style="border-radius:.5em" data-astro-transition-scope="astro-vz7ejtmd-1" width="750" height="422" loading="lazy" decoding="async"> <h1 class="title my-2 text-4xl font-bold" data-astro-transition-scope="astro-frvnq75b-2">Python + Go: Introduction</h1> <time>May 5, 2025</time> <br>  <a href="/blog/tag/python" class="badge badge-outline ml-2 no-underline"> python </a><a href="/blog/tag/go" class="badge badge-outline ml-2 no-underline"> go </a><a href="/blog/tag/C" class="badge badge-outline ml-2 no-underline"> C </a><a href="/blog/tag/web" class="badge badge-outline ml-2 no-underline"> web </a><a href="/blog/tag/theory" class="badge badge-outline ml-2 no-underline"> theory </a><a href="/blog/tag/packages" class="badge badge-outline ml-2 no-underline"> packages </a>   <div class="divider my-2"></div> <div> <h2>Table of contents</h2> <ul id="TOC-list"> <li class="level-2"> <a href="#what-is-dynamic-linking" class="no-underline"> What is Dynamic Linking </a> </li><li class="level-2"> <a href="#testing-the-hypothesis" class="no-underline"> Testing the hypothesis </a> </li><li class="level-3"> <a href="#site-scraper" class="no-underline"> Site Scraper </a> </li><li class="level-3"> <a href="#similarity" class="no-underline"> Similarity </a> </li><li class="level-2"> <a href="#conclusions" class="no-underline"> Conclusions </a> </li> </ul> </div>
  <hr><p>Python can be slow at the best of times, but sometimes it‚Äôs the best option for you, or your team. How can we offset python‚Äôs weaknesses with other language‚Äôs strengths? Is it worth it to integrate libraries written in other languages for the slow parts of python, and use python for the rest? What are the pros and cons to doing this?</p>
<p>I‚Äôve been experimenting over the last week with this idea, but I‚Äôve had it for a long time. I just didn‚Äôt have the right language, or knowledge base to do it well before. Most languages people do this sort of work with are C, C++, Rust or some obscure systems programming language. Go on the other hand is slightly more difficult than python to learn, but not by much. If you‚Äôre familiar with static typing, and willing to experiment, you can pick up go in a week or two. So, is it worth it?</p>
<h2 id="what-is-dynamic-linking">What is Dynamic Linking</h2>
<p>*<em>Some of the terms I‚Äôm using have multiple definitions, so not everywhere will match with what I say here</em></p>
<p>To start with, let‚Äôs understand a bit of what I‚Äôm doing. A shared library for the purposes of this article is a <code>.dll</code> (windows) or <code>.so</code> file. The purpose of these files is to allow you to share code and resources (images, fonts etc.) more easily. Essentially you can compile code and other resources into a shared library, and python can then import them. I will call this process dynamic linking.</p>
<p>Creating shared libraries is a feature of a ton of languages (go, <a href="https://doc.rust-lang.org/reference/linkage.html">rust</a>, <a href="https://www.c-sharpcorner.com/UploadFile/1e050f/creating-and-using-dll-class-library-in-C-Sharp/"><code>C#</code></a>), so the skills from this post on the python side are transferrable to working with code from any of those languages. The basic setup for the code will be something like this:</p>
<p><img src="/tech/blog/python-plus-go/diagram.excalidraw.png" alt=""></p>
<h2 id="testing-the-hypothesis">Testing the hypothesis</h2>
<p>First I needed to see if I should even bother. There‚Äôs a lot of back and forth that happens with this process between the languages, so is it actually worth doing? I decided to test 2 separate use cases. My approach was to create a shared library, dynamically link it in python, and use it to create a library in python that‚Äôs easy to use. Essentially for anyone using the library, they should have no idea that it‚Äôs calling to go in the first place. That last part is quite hard (more details later).</p>
<p>So the two test libraries I made were:</p>
<ol>
<li>A library to fetch details about websites for scraping. This would grab the URL, some headers and the content, and wrap it up into an easy to use class</li>
<li>A library to calculate string similarity. This is the building blocks of something like an autocorrect feature for a CLI or application</li>
</ol>
<p>I chose both of these because they were computationally expensive, and in the case of the web scraper, <a href="https://en.wikipedia.org/wiki/Embarrassingly_parallel#:~:text=In%20parallel%20computing%2C%20an%20embarrassingly,a%20number%20of%20parallel%20tasks.">embarrassingly parallel</a>. The type of tasks that I would usually end up reaching to go for. So with some napkin math, and quick and dirty measuring, how well did it end up?</p>
<h3 id="site-scraper">Site Scraper</h3>
<p>Go excels at multithreaded code, python really does not. I threw together a quick multithreaded system that requests a bunch of URL‚Äôs, gathers their data, and dumps it into a python object(s). The pure python implementation used <a href="https://pypi.org/project/requests/">requests</a> and a <a href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor">ThreadPoolExecutor</a> with 10 workers. The results were:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span>Pure python version took 17.39162588119507 seconds for 99 sites with:</span></span>
<span class="line"><span>        Max CPU usage of 1.8</span></span>
<span class="line"><span>        Peak System RAM usage of: 70.0 %</span></span>
<span class="line"><span>Go + python version took 4.625860929489136 seconds for 99 sites with:</span></span>
<span class="line"><span>        Max CPU usage of 1.9</span></span>
<span class="line"><span>        Peak System RAM usage of: 70.4 %</span></span>
<span class="line"><span>Memory difference is 0.4000000000000057% of 33444192256 Bytes</span></span>
<span class="line"><span>        133776769.02400188 B</span></span>
<span class="line"><span>        130641.0 KB</span></span>
<span class="line"><span>        127.0 MB </span></span></code></pre>
<p>Meaning the Go version was significantly faster (~3.8x), and this gap got worse as you add more URL‚Äôs, but go used more <strong>peak memory</strong>. In general this memory usage only amounted to happening when the initial 3-4 lines of python code ran to process the requests, then went back down to parity. I think this is because I did not really optimize the go code much, so there were lots of extra copies of the data living in memory at one time, with optimizations you could get it pretty close to parity I think. The purpose wasn‚Äôt to create the best library, it was to see if working at a similar development speed to python I could whip something up that was much faster, and this certainly was. I spit out the demo for this in ~3.5 hours of coding (including research time to figure out how to do all this).</p>
<p>The API for the system also shook out to being pretty simple in python:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">Site() </span><span style="color:#6A737D"># Main class that is interacted with</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Method to create a new site instance from a str of a url</span></span>
<span class="line"><span style="color:#E1E4E8">Site.from_str(url:</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Method to create a list of site instances from a list of urls</span></span>
<span class="line"><span style="color:#E1E4E8">Site.from_urls(urls:list[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">])</span></span></code></pre>
<p>Easy to use, and fast. Not to mention this version you don‚Äôt need to mess around with any of pythons multithreading/multiprocessing, go handles all of it.</p>
<h3 id="similarity">Similarity</h3>
<p>This is one people may be less familiar with. String similarity is essentially a number between 0-1 that will tell you how similar two strings are. It‚Äôs the combination of the <a href="https://en.wikipedia.org/wiki/Edit_distance">edit distance</a> and a result as a normalized weight (between 0-1). So for example you might get something like this:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">valid_words </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"init"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"and"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"or"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"move"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">user_input </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "mve"</span><span style="color:#6A737D"> # Misspelled move</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">suggest_word(user_input, words) </span><span style="color:#6A737D"># Returns ("move", 85.71)</span></span></code></pre>
<p>Where it thinks <code>mve</code> is <code>move</code> with ~<code>86%</code> likelihood. This has uses in traditional autocorrect, or simpler issues. For example when you type in a prompt (such as at a CLI), you might mistype a command. When this happens we want some way to be able to suggest a similar valid command. I implemented the code as a more complicated library in go using <a href="https://en.wikipedia.org/wiki/Indel">indel</a> similarity, which is faster but searches less completely than pure <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">levenstein</a> like most systems use. The only part that actually matters is the performance, so with a dictionary of ~370,000 words (from <a href="https://github.com/dwyl/english-words">here</a>) how quickly can we get a suggested word. You can see the full python version below:</p>
<details><summary> Full python code (hidden to make reading easier)</summary>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> indel_similarity</span><span style="color:#E1E4E8">(inputString:</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, targetString:</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">) -> </span><span style="color:#79B8FF">float</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#9ECBFF">    """Calculates the indel similarity of two strings</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">    Parameters</span></span>
<span class="line"><span style="color:#9ECBFF">    ----------</span></span>
<span class="line"><span style="color:#9ECBFF">    inputString : str</span></span>
<span class="line"><span style="color:#9ECBFF">        The string you want to compare</span></span>
<span class="line"><span style="color:#9ECBFF">    targetString : str</span></span>
<span class="line"><span style="color:#9ECBFF">        The string you want to compare to</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">    Returns</span></span>
<span class="line"><span style="color:#9ECBFF">    -------</span></span>
<span class="line"><span style="color:#9ECBFF">    float</span></span>
<span class="line"><span style="color:#9ECBFF">        The similarity (a normalized weight of the distance)</span></span>
<span class="line"><span style="color:#9ECBFF">    """</span></span>
<span class="line"><span style="color:#E1E4E8">    inputLength, targetLength </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> len</span><span style="color:#E1E4E8">(inputString), </span><span style="color:#79B8FF">len</span><span style="color:#E1E4E8">(targetString)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    matrix </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [[</span><span style="color:#79B8FF">0</span><span style="color:#F97583"> for</span><span style="color:#E1E4E8"> _ </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(targetLength </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">)] </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> _ </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(inputLength </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> inputIndex </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(inputLength </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">        matrix[inputIndex][</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> inputIndex</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> targetIndex </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(targetLength </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">        matrix[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">][targetIndex] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> targetIndex</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> inputIndex </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, inputLength </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> targetIndex </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, targetLength </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#F97583">            if</span><span style="color:#E1E4E8"> inputString[inputIndex </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> targetString[targetIndex </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">]:</span></span>
<span class="line"><span style="color:#E1E4E8">                matrix[inputIndex][targetIndex] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> matrix[inputIndex </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">][targetIndex </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#F97583">            else</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">              matrix[inputIndex][targetIndex] </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> min</span><span style="color:#E1E4E8">(matrix[inputIndex </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">][targetIndex] </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, matrix[inputIndex][targetIndex </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#E1E4E8">    distance </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> matrix[inputLength][targetLength]</span></span>
<span class="line"><span style="color:#E1E4E8">    normalized_distance </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> distance </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> (inputLength </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> targetLength)</span></span>
<span class="line"><span style="color:#E1E4E8">    similarity </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> -</span><span style="color:#E1E4E8"> normalized_distance</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> similarity</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> suggestWord</span><span style="color:#E1E4E8">(input_string:</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, valid_words:list[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">]) -> list[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">float</span><span style="color:#E1E4E8">]:</span></span>
<span class="line"><span style="color:#9ECBFF">    """Takes in a word and suggests a word from the list of valid words</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">    Parameters</span></span>
<span class="line"><span style="color:#9ECBFF">    ----------</span></span>
<span class="line"><span style="color:#9ECBFF">    input_string : str</span></span>
<span class="line"><span style="color:#9ECBFF">        The string to compare against valid words</span></span>
<span class="line"><span style="color:#9ECBFF">    valid_words : list[str]</span></span>
<span class="line"><span style="color:#9ECBFF">        The words that are considered valid</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">    Returns</span></span>
<span class="line"><span style="color:#9ECBFF">    -------</span></span>
<span class="line"><span style="color:#9ECBFF">    list[str, float]</span></span>
<span class="line"><span style="color:#9ECBFF">        The suggested word, and the likelihood</span></span>
<span class="line"><span style="color:#9ECBFF">    """</span></span>
<span class="line"><span style="color:#E1E4E8">    highest </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0.0</span></span>
<span class="line"><span style="color:#E1E4E8">    suggested_word </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> ""</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> word </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> valid_words:</span></span>
<span class="line"><span style="color:#E1E4E8">        similarity </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> indel_similarity(input_string, word)</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> similarity </span><span style="color:#F97583">></span><span style="color:#E1E4E8"> highest:</span></span>
<span class="line"><span style="color:#E1E4E8">            highest </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> similarity</span></span>
<span class="line"><span style="color:#E1E4E8">            suggested_word </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> word</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> suggested_word, highest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> load_words</span><span style="color:#E1E4E8">() -> list[</span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">]:</span></span>
<span class="line"><span style="color:#9ECBFF">    """Load a set of words from a text file</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">    Returns</span></span>
<span class="line"><span style="color:#9ECBFF">    -------</span></span>
<span class="line"><span style="color:#9ECBFF">    list[str]</span></span>
<span class="line"><span style="color:#9ECBFF">        The list of words</span></span>
<span class="line"><span style="color:#9ECBFF">    """</span></span>
<span class="line"><span style="color:#E1E4E8">    res </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> []</span></span>
<span class="line"><span style="color:#F97583">    with</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"words.txt"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"r"</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> f:</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> line </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> f.read().split():</span></span>
<span class="line"><span style="color:#E1E4E8">            res.append(line)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res</span></span></code></pre>
</details>
<p>The equivalent go code is a bit fancier, but roughly it would be the code below:</p>
<details><summary> Full go code (hidden to make reading easier)</summary>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">package</span><span style="color:#B392F0"> main</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">	_ </span><span style="color:#9ECBFF">"</span><span style="color:#B392F0">embed</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#9ECBFF">	"</span><span style="color:#B392F0">strings</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6A737D">//go:embed words.txt</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> wordsContent </span><span style="color:#F97583">string</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Suggestion</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	Likelihood </span><span style="color:#F97583">float32</span></span>
<span class="line"><span style="color:#E1E4E8">	Word       </span><span style="color:#F97583">string</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> DistanceAlgorithm</span><span style="color:#F97583"> func</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">inputString</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">targetString</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">int</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> SimilarityAlgorithm</span><span style="color:#F97583"> func</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">inputString</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">targetString</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">float32</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Function that calculates the similarity of two strings using a distance algortithm</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Parameters</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">//	inputString (string): The first string to use for the comparison</span></span>
<span class="line"><span style="color:#6A737D">//	targetString (string): The second string to use for the comparison</span></span>
<span class="line"><span style="color:#6A737D">//  algorithm (DistanceAlgorithm): The algorithm to use to calculate the distance</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Returns</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">//	float32: The similarity (between 0-1, closer to 1 is more similar)</span></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#B392F0"> CalculateSimilarity</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">inputString</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">targetString</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">algorithm</span><span style="color:#B392F0"> DistanceAlgorithm</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">float32</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	inputLength </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> len</span><span style="color:#E1E4E8">(inputString)</span></span>
<span class="line"><span style="color:#E1E4E8">	targetLength </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> len</span><span style="color:#E1E4E8">(targetString)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// Get the distance</span></span>
<span class="line"><span style="color:#E1E4E8">	distance </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> algorithm</span><span style="color:#E1E4E8">(inputString, targetString)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// Normalize your distance across the lengths of the inputs</span></span>
<span class="line"><span style="color:#E1E4E8">	normalized_distance </span><span style="color:#F97583">:=</span><span style="color:#F97583"> float32</span><span style="color:#E1E4E8">(distance) </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">float32</span><span style="color:#E1E4E8">(inputLength) </span><span style="color:#F97583">+</span><span style="color:#F97583"> float32</span><span style="color:#E1E4E8">(targetLength))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// Get the final similarity and return it</span></span>
<span class="line"><span style="color:#E1E4E8">	similarity </span><span style="color:#F97583">:=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> -</span><span style="color:#E1E4E8"> normalized_distance</span></span>
<span class="line"><span style="color:#F97583">	return</span><span style="color:#E1E4E8"> similarity</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Function that suggests the highest similarity word to the input string</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Parameters</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">//	inputString (string): The first string to use for the comparison</span></span>
<span class="line"><span style="color:#6A737D">//	validStrings ([]string): The valid words to check against</span></span>
<span class="line"><span style="color:#6A737D">//	algorithm (SimilarityAlgorithm): The algorithm to run and generate the similarity for</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Returns</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">//	float32: The similarity (between 0-1, closer to 1 is more similar)</span></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#B392F0"> SuggestWord</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">inputString</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">validStrings</span><span style="color:#E1E4E8"> []</span><span style="color:#F97583">string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">algorithm</span><span style="color:#B392F0"> SimilarityAlgorithm</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">Suggestion</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">	var</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">		highestRatio </span><span style="color:#F97583">float32</span></span>
<span class="line"><span style="color:#E1E4E8">		result       </span><span style="color:#F97583">string</span></span>
<span class="line"><span style="color:#E1E4E8">	)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">	for</span><span style="color:#E1E4E8"> _, currentString </span><span style="color:#F97583">:=</span><span style="color:#F97583"> range</span><span style="color:#E1E4E8"> validStrings {</span></span>
<span class="line"><span style="color:#E1E4E8">		likelihood </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> algorithm</span><span style="color:#E1E4E8">(inputString, currentString)</span></span>
<span class="line"><span style="color:#F97583">		if</span><span style="color:#E1E4E8"> likelihood </span><span style="color:#F97583">></span><span style="color:#E1E4E8"> highestRatio {</span></span>
<span class="line"><span style="color:#E1E4E8">			highestRatio </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> likelihood</span></span>
<span class="line"><span style="color:#E1E4E8">			result </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> currentString</span></span>
<span class="line"><span style="color:#E1E4E8">		}</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">	return</span><span style="color:#B392F0"> Suggestion</span><span style="color:#E1E4E8">{highestRatio, result}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Calculates the Indel similarity of two strings</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Parameters</span></span>
<span class="line"><span style="color:#6A737D">//  inputString (string): The first string to use for the comparison</span></span>
<span class="line"><span style="color:#6A737D">//  targetString (string): The second string to use for the comparison</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Returns</span></span>
<span class="line"><span style="color:#6A737D">//  float32: The indel distance (between 0-1, closer to 1 is more similar)</span></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#B392F0"> IndelSimilarity</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">inputString</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">targetString</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">float32</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	similarity </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> CalculateSimilarity</span><span style="color:#E1E4E8">(inputString, targetString, IndelDistance)</span></span>
<span class="line"><span style="color:#F97583">	return</span><span style="color:#E1E4E8"> similarity</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Calculates the Indel distance of two strings</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Parameters</span></span>
<span class="line"><span style="color:#6A737D">//  inputString (string): The first string to use for the comparison</span></span>
<span class="line"><span style="color:#6A737D">//  targetString (string): The second string to use for the comparison</span></span>
<span class="line"><span style="color:#6A737D">//</span></span>
<span class="line"><span style="color:#6A737D">// # Returns</span></span>
<span class="line"><span style="color:#6A737D">//  int: The indel distance (edit, delete distance)</span></span>
<span class="line"><span style="color:#F97583">func</span><span style="color:#B392F0"> IndelDistance</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">inputString</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">targetString</span><span style="color:#F97583"> string</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">int</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	inputLength </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> len</span><span style="color:#E1E4E8">(inputString)</span></span>
<span class="line"><span style="color:#E1E4E8">	targetLength </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> len</span><span style="color:#E1E4E8">(targetString)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// Construct initial matrix</span></span>
<span class="line"><span style="color:#E1E4E8">	matrix </span><span style="color:#F97583">:=</span><span style="color:#B392F0"> make</span><span style="color:#E1E4E8">([][]</span><span style="color:#F97583">int</span><span style="color:#E1E4E8">, inputLength</span><span style="color:#F97583">+</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">	for</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">:=</span><span style="color:#F97583"> range</span><span style="color:#E1E4E8"> matrix {</span></span>
<span class="line"><span style="color:#E1E4E8">		matrix[i] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> make</span><span style="color:#E1E4E8">([]</span><span style="color:#F97583">int</span><span style="color:#E1E4E8">, targetLength</span><span style="color:#F97583">+</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">	for</span><span style="color:#E1E4E8"> inputIndex </span><span style="color:#F97583">:=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; inputIndex </span><span style="color:#F97583">&#x3C;=</span><span style="color:#E1E4E8"> inputLength; inputIndex</span><span style="color:#F97583">++</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">		matrix[inputIndex][</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> inputIndex</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#F97583">	for</span><span style="color:#E1E4E8"> targetIndex </span><span style="color:#F97583">:=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; targetIndex </span><span style="color:#F97583">&#x3C;=</span><span style="color:#E1E4E8"> targetLength; targetIndex</span><span style="color:#F97583">++</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">		matrix[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">][targetIndex] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> targetIndex</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// Calculate indel matrix</span></span>
<span class="line"><span style="color:#F97583">	for</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">:=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> inputLength</span><span style="color:#F97583">+</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">		for</span><span style="color:#E1E4E8"> j </span><span style="color:#F97583">:=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">; j </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> targetLength</span><span style="color:#F97583">+</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">; j</span><span style="color:#F97583">++</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">			if</span><span style="color:#E1E4E8"> inputString[i</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> targetString[j</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] {</span></span>
<span class="line"><span style="color:#E1E4E8">				matrix[i][j] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> matrix[i</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">][j</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">			} </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">				matrix[i][j] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> min</span><span style="color:#E1E4E8">((matrix[i</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">][j] </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">), (matrix[i][j</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#E1E4E8">			}</span></span>
<span class="line"><span style="color:#E1E4E8">		}</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// Determine distance for the provided input</span></span>
<span class="line"><span style="color:#E1E4E8">	distance </span><span style="color:#F97583">:=</span><span style="color:#E1E4E8"> matrix[inputLength][targetLength]</span></span>
<span class="line"><span style="color:#F97583">	return</span><span style="color:#E1E4E8"> distance</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
</details>
<p>Without comments the go code is 82 lines (without the wrapper library), and the python all in is 40. But the go is a general solution with any distance algorithm, and python is just for indel similarity. The go version was go+python, where the print statements and data passing were done in python, then go did the heavy lifting. The API for that was a single function:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6A737D"># Returns a tuple with the suggested word first, and a float between 0-100 for the percentage of likelihood</span></span>
<span class="line"><span style="color:#E1E4E8">spellcheck(word:</span><span style="color:#79B8FF">str</span><span style="color:#F97583">|</span><span style="color:#79B8FF">bytes</span><span style="color:#E1E4E8">) </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">spellcheck(</span><span style="color:#9ECBFF">"almni"</span><span style="color:#E1E4E8">) </span><span style="color:#6A737D"># ("alumni", 85.71428656578064)</span></span></code></pre>
<p>Performance wise we got:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span>python returned:</span></span>
<span class="line"><span>	The suggested word for almni is alumni with a ratio of 0.9090909090909091</span></span>
<span class="line"><span>	Took 3254.749 miliseconds</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Go returned:</span></span>
<span class="line"><span>	The suggested word for almni is move with a likelihood of 85.71428656578064</span></span>
<span class="line"><span>	Took 90.881 miliseconds</span></span></code></pre>
<p>So roughly ~36x faster with go. This is also without any multithreading on either side to see if it was worth doing it for slow single-threaded tasks.</p>
<h2 id="conclusions">Conclusions</h2>
<p>So, the system works, and it works well. 3-36x speedups in two common tasks is pretty good, but there‚Äôs also dragons here. I will have 2 other posts in this series walking through <strong>how</strong> to do this, but whether you <strong>should</strong> or not is up to you. If you choose to go this route be warned it‚Äôs a bit of a nightmare of undiagnosable problems sometimes. I was compiling on windows and several times for obscure reasons I ended up with compile errors stating:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#B392F0">$></span><span style="color:#9ECBFF"> go</span><span style="color:#9ECBFF"> build</span><span style="color:#79B8FF"> -buildmode=c-shared</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> lib.dll</span><span style="color:#9ECBFF"> lib.go</span></span>
<span class="line"><span style="color:#79B8FF">command</span><span style="color:#E1E4E8">-line-arguments: </span><span style="color:#9ECBFF">open</span><span style="color:#9ECBFF"> C:</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">Users</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">kiera</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">AppData</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">Local</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">Temp</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">go-build4281783149</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">b001</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">exe</span><span style="color:#79B8FF">\\</span><span style="color:#9ECBFF">lib.dll:</span><span style="color:#9ECBFF"> Operation</span><span style="color:#9ECBFF"> did</span><span style="color:#9ECBFF"> not</span><span style="color:#9ECBFF"> complete</span><span style="color:#9ECBFF"> successfully</span><span style="color:#9ECBFF"> because</span><span style="color:#9ECBFF"> the</span><span style="color:#9ECBFF"> file</span><span style="color:#9ECBFF"> contains</span><span style="color:#9ECBFF"> a</span><span style="color:#9ECBFF"> virus</span><span style="color:#9ECBFF"> or</span><span style="color:#9ECBFF"> potentially</span><span style="color:#9ECBFF"> unwanted</span><span style="color:#9ECBFF"> software.</span></span></code></pre>
<p>With what I encountered, it was one of maybe 3 potential issues:</p>
<ol>
<li>Because <code>%USERPROFILE\Temp</code> is a protected route since apps store lots of data there, it was being extra careful</li>
<li>I used <a href="https://pkg.go.dev/embed"><code>//embed</code></a> to embed a text file, which it saw as being malicious. Hackers will often include obfuscated code like this, so that makes sense. Unfortunately I tested the library using <code>go run</code>, so this issue only popped up right at the end, and I had nothing to go off to discover this was a potential issue</li>
<li>Windows assumes vaugely named DLL‚Äôs are dangerous. I used the name <code>lib.dll</code> which combined with direct memory access made windows assume it was malware. In fact even when it compiled properly python wouldn‚Äôt let me import <code>lib.dll</code></li>
</ol>
<p>I changed the name to <code>similarity.dll</code>, and disabled my defender to compile, and everything worked. This is just a microcosm of the weirdness you can run into when going this route. Some of which is just trial and error to fix. If you corrupt memory for example, there‚Äôs no error message at all, your program just won‚Äôt run it will print messages until the error, then silently dies in the background. If you decode <code>\r</code> incorrectly, your print statements will break until the next <code>\n</code> in python and go making you think you have a memory corruption issue, but you just messed up your string parsing. If you misalign memory‚Ä¶ You get the point. This was also all done on windows and tested on windows, managing all the different runtime environments I‚Äôm sure is another beast entirely.</p>
<p>So, whether it‚Äôs worth it or not is up to you, but if you have a use case, or are up for the challenge, check out the <a href="https://kieranwood.ca/tech/blog/python-plus-go-basics">next post</a> for details on <strong>how</strong> to do this.</p>  </article> </main> <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js" integrity="sha256-mm3Re3y7xlvh+yCD+l/Zs1d+PU0AEad93MkWvljfm/s=" crossorigin="anonymous"></script>   </main> </div> <footer class="footer footer-center block mb-5 pt-10"> <div class="pb-2">
&copy; 2025 Kieran Wood
</div> <div class="inline opacity-75"> <!-- Thanks for using this template. You can keep this line to support my work :) --> <a href="https://astrofy-template.netlify.app/" target="_blank" class="font-bold">Astrofy Template</a> developed by
<a href="https://manuelernestog.github.io" target="_blank" class="font-bold">Manuel Ernesto ‚ö°Ô∏è</a> </div> </footer>  </div> <div class="drawer-side z-40"> <label for="my-drawer" class="drawer-overlay"></label> <aside class="px-2 pt-2 h-auto min-h-full w-[19rem] bg-base-200 text-base-content flex flex-col"> <div class="w-fit mx-auto mt-5 mb-6"> <a href="/"> <div class="avatar transition ease-in-out hover:scale-[102%] block m-auto"> <div class="w-[8.5rem]"> <img src="/tech/profile.jpg" class="mask mask-circle" alt="Profile image" width="300" height="300" loading="lazy" decoding="async"> </div> </div> </a> </div> <ul class="menu grow shrink menu-md overflow-y-auto"> <li><a class="py-3 text-base" id="home" href="/tech/">Home</a></li> <li><a class="py-3 text-base" id="projects" href="/tech/projects">Projects</a></li> <!-- <li><a class="py-3 text-base" id="services" href="/tech/services">Services</a></li>
    <li><a class="py-3 text-base" id="store" href="/tech/store">Store</a></li> --> <li><a class="py-3 text-base" id="blog" href="/tech/blog/">Blog</a></li> <li><a class="py-3 text-base" id="cv" href="/tech/cv">CV</a></li> <li><a class="py-3 text-base" href="/tech/contact">Contact</a></li> </ul> <script>(function(){const sideBarActiveItemID = undefined;
const activeClass = "bg-base-300";

const activeItemElem = document.getElementById(sideBarActiveItemID);
activeItemElem && activeItemElem.classList.add(activeClass);
})();</script> <div class="block sticky pointer-events-none bottom-10 bg-base-200 justify-center h-12 [mask-image:linear-gradient(transparent,#000000)]"></div> <div class="social-icons px-4 pb-5 pt-1 flex self-center justify-center sticky bottom-0 bg-base-200"> <a href="https://github.com/descent098" target="_blank" class="mx-3" aria-label="Github" title="Github"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: currentColor;transform: ;msFilter:;"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z"></path> </svg> </a> <a href="https://www.linkedin.com/in/kieran-wood" target="_blank" class="mx-3" aria-label="Linkedin" title="Linkedin"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: currentColor;transform: ;msFilter:;"><circle cx="4.983" cy="5.009" r="2.188"></circle><path d="M9.237 8.855v12.139h3.769v-6.003c0-1.584.298-3.118 2.262-3.118 1.937 0 1.961 1.811 1.961 3.218v5.904H21v-6.657c0-3.27-.704-5.783-4.526-5.783-1.835 0-3.065 1.007-3.568 1.96h-.051v-1.66H9.237zm-6.142 0H6.87v12.139H3.095z"></path> </svg> </a> <a href="https://instagram.com/descent098" target="_blank" class="mx-3" aria-label="Instagram" title="Instagram"> <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 -5 24 24" style="fill: currentColor;transform: ;msFilter:;"><path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"></path> </svg> </a> <a href="/rss.xml" target="_blank" class="mx-3" aria-label="RSS Feed" title="RSS Feed"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: currentColor;transform: ;msFilter:;"><path d="M19 20.001C19 11.729 12.271 5 4 5v2c7.168 0 13 5.832 13 13.001h2z"></path><path d="M12 20.001h2C14 14.486 9.514 10 4 10v2c4.411 0 8 3.589 8 8.001z"></path><circle cx="6" cy="18" r="2"></circle> </svg> </a> </div> </aside> </div> </div> </body></html>